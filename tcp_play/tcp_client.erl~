#!/usr/bin/env escript

main(A) ->
    [Str] = A,
    send_server(Str).

send_server(Str) ->
    {ok, Socket} = gen_tcp:connect("localhost", 2345, [binary, {packet, 4}]),
    ok = gen_tcp:send(Socket, term_to_binary(Str)),
    receive_data(Socket, []).

receive_data(Socket, []) ->
    receive
	{tcp, Socket, Bin} ->
	   receive_data(Socket, [SoFar, Bin]); 
	{tcp_closed, Socket} ->
	    list_to_binary(SoFar)
    end.

